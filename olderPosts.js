handleOlderPosts([
    {
        "filename": "202510231432cinnamon4 post time finally.md",
        "title": "So I Rewrote My Discord Bot For the Fourth Time",
        "subtitle": "W H Y",
        "thumbnail": "https://i.imgur.com/8uXF24C.png",
        "content": "# So I Rewrote My Discord Bot For the Fourth Time\n\nMy friends and unwitting friends, I bring a rare tale of success in rewriting a codebase- (from like 5 months ago)\n\n![thumbnail](https://i.imgur.com/8uXF24C.png)\n![Screenshot of me in discord deciding to rewrite this thing again again](https://i.imgur.com/PooABUM.png)\n\n\n[Cinnamon4](https://github.com/Vivian-Green/cinnamon4), my discord bot, is both a very poorly named project [(considering my recent choice of OS)](https://linuxmint.com/download.php) and easily my oldest still-maintained project. It started in 2017 as a random side project that was used for shitposting and discord D&D, which, over six years, accidentally snowballed in scope into having a few useful features. The most used being reminders, a calculator function, and dice rolling, but it grew and shrunk in scope over the years, as I added features, and decided they were cringe. Maybe I can dig up the old help page for the bot... oh no I can totally [just host that here too](https://vivianswebsite.neocities.org/cinnamon_help_2023), can't I-\n\nIn any case, the original cinnamon was just bot.py, which lasted a year or two, until I tried to use it, and found that discord.py had been deprecated. My response to this was to just rewrite the entire thing in node.js around 2019. We do not talk about Cinnamon2. [Cinnamon2](https://github.com/Vivian-Green/cinnamon-js) was written in javascript. \n\nThe moment I found out that discord.py had support again, I took the old python code and migrated things over, then extended it to have feature parity with the node.js version, before throwing the javascript directly into the trash. This was then split into some of the core modules I still use, as well as other modules that later became plugins in the rewrite this post is actually about! [Nonchalauntly shoehorned Cinnamon3 link](https://github.com/Vivian-Green/cinnamon-py)\n\n## W H Y\n\nSo I was trying to add a *new* bit of functionality to the bot, to help with making my silly little unofficial BLG compilations. I wanted it to be able to handle building my project files for me. I found myself staring at a codebase that'd been extended for 6+ years, without any major restructuring since being split into modules post-javascript.\n\nThe problem wasn't that the code was in modules- it was how those modules were organized. I had some separation of concerns, but all of the interfacing with the modules was hardcoded into bot.py with specific command handlers and function calls. Want to add a new feature? Gotta trudge through the main bot file and figure out where you actually need to look, in the still 1800-line-not-monolith.\n\nLooking at the old `bot.py`, you can see the problem:\n\n```python\nimport cinReminders\nimport cinSolve\nimport cinYoinkytModule\n# ... 20 more lines of hardcoded module imports ...\n\nmatch command:\n    case \"remindme\" | \"reminder\":\n        await cinReminders.newReminder(wordsCaseSensitive[1:], message)\n    case \"solve\":\n        await cinSolve.solve(message, messageContent)\n    case \"clip\":\n        await cinYoinkytModule.clip(words, message) # <- weird, inconsistent naming?\n    # ... way too many hardcoded cases  ...\n```\n\nSo I gutted it. *Again.* The main script is 281 lines now. It loads everything it needs to. \n\n## Fixing that Godawful Mess with Minimal Tape\n\nMost of my modules already *were* trying to be plugins, they just lacked any system for bindings, being used as hardcoded dependencies rather than extensions, and as such, were still a bit too interconnected with main.\n\nThis really wasn't that much tape:\n\n```python\ndef load_plugins():\n    printHighlighted(f\"{fiveLines}Loading plugins...\")\n    plugins_dir = Path(\"./plugins\")\n\n    # Iterate through all directories in the plugins folder\n    for plugin_dir in plugins_dir.iterdir():\n        printLabelWithInfo(\"  plugin\", plugin_dir)\n        # ... (guard clauses) ...\n\n        # Create the module spec and import it\n        module_name = f\"plugins.{plugin_dir.name}\"\n        spec = importlib.util.spec_from_file_location(module_name, init_file)\n\n        module = importlib.util.module_from_spec(spec)\n        spec.loader.exec_module(module)  # type: ignore\n\n        # Call the bind functions if they exist\n        if hasattr(module, \"bind_commands\"):\n            cmd_dict = module.bind_commands()\n            if isinstance(cmd_dict, dict):\n                commands.update(cmd_dict)\n                printLabelWithInfo(\"    commands\", cmd_dict)\n            else:\n                printErr(f\"bind_commands() in plugin {plugin_dir} returned invalid data? {cmd_dict}\")\n        # ... (like 4 other bind functions) ...\n```\n\nThat's all it took to get those [Dependencies Inverted(tm)](https://en.wikipedia.org/wiki/Dependency_inversion_principle) and [Concerns Separated(tm)](https://en.wikipedia.org/wiki/Separation_of_concerns) through the Registry Pattern(tm). My coupling! It's [loose!](https://en.wikipedia.org/wiki/Loose_coupling) The interfaces are informal/implicit (bind_commands has its input and output types, but... I'm not enforcing much-) because... well to be honest, I'm the one writing these plugins, I can just use my binding functions as they're defined ðŸ‘‰ðŸ‘‰\n\nIn english: That loader is the function I needed to detangle my high-level feature code from my low-level implementation code. It should ask more questions than it does, but that's probably fine.\n\nBefore I had functionality scattered across modules that were all in the root folder, manually imported and bound into hardcoded command handlers. Now each plugin is its own self-contained unit, defining and registering its own commands, help messages, message and reaction handlers, and background tasks. The script discovers and loads plugins, instead of having to already know about every possible command and feature; nobody cares what the other side of the phone is doing. \n\nThis made development so much smoother. It was starting to become a *task* to extend cinnamon, even with the modules, but now with ~plugins~ it's so much easier. It feels more like modding a game than extending a codebase- because there's enough of a framework to focus on the fun parts <3\n\n```python\nimport cinShared\n\nasync def test_command(message):\n    await message.channel.send(\"yo\")\n\ndef bind_commands():\n     return {\n         \"test\": test_command\n     }\n```\n\nLook at that- tell me that doesn't look straight out of a BepinEx tutorial... but in python... ok it's a stretch, but that's an entire discord bot plugin! You could take the core of my discord bot and its plugin documentation, have no idea how the code works, write the 6 lines above, and have a functional discord bot. There's a decent amount under the hood to make it work, and that plugin doesn't exactly *do* much, but, put that into a folder in the plugins folder, call it `__init__.py`, and she'll run.\n\n## And it was actually worth it???\n\nIt took like a week, and I could still reuse 90% of what I started with, so the time sink wasn't nearly as bad as I thought it would be. Now when I get the urge to add something new at 2 AM, I don't have to worry about accidentally breaking the reminder system that I actually depend on. If the new plugin fails to load, it's just that plugin. If that command errors, it's just that command- it fails so gracefully and informatively ;-;\n\nAll of the tape on the loader side has been written. If, for some obscene reason, I need to write more tape on the loader side (eg., a new binding function), I don't have to change any of the tape on the plugin side. Besides that, all future tape will be on the plugin side. I don't have to look between files to check if I'm calling things right. That's **so** nice. I could work on this for another 6 years.\n\nNow to abstract away the discord api dependency...\n"
    },
    {
        "filename": "202508161435website overhaul again.md",
        "title": "Updating How These Posts are Stored, Maybe This Works",
        "subtitle": "",
        "thumbnail": "https://i.imgur.com/VQj37QV.png",
        "content": "# Updating How These Posts are Stored, Maybe This Works\n\nSo I'm writing this update to see if this site is properly importing data from github. If so, only 16KB of this page was sent through neocities, and I can avoid potential strain on their servers. Will I ever get enough traffic to strain their servers otherwise? Almost definitely not, but eh.\n\nOk **SO-** goddamn that was a pain. I'm trying (and now succeeding) to load post data from github, and core site data on neocities. I was already building these posts to *javascript* files, and then decided to convert to json to try and do things \"properly.\" This resulted in MIME type and CORS shenanigans, for a while. Apparently, neocities' CSP didn't want me to offload work from them, and wouldn't let me import json. Ended up settling on JSONP... which is... javascript. I was building to javascript instead of json originally. I'm just making very slightly differently flavored javascript, wrapping the data in a function instead of a variable, and this works. Sure, why not. It's javascript, idk why I expected it to stop being haunted.\n\nLo, another piece of tape has been placed on the interconnected web of tape; but nobody wept, for they already knew.\n\n![](https://i.imgur.com/VQj37QV.png)\n"
    },
    {
        "filename": "202508151715procedural mesh generation time ball edition.md",
        "title": "Procedural Mesh Generation Time Again, Ball Edition ",
        "subtitle": "Demo scene:",
        "thumbnail": "https://i.imgur.com/BancAif.png",
        "content": "# Procedural Mesh Generation Time Again, Ball Edition \n\n![Screenshot of a generated planet that happens to be a flower](https://i.imgur.com/BancAif.png)  \n![test](https://i.imgur.com/VQj37QV.png)\n\nWrote a script to solve my ball displacement needs. This started as a remake of an old unity prototype from 2018, sometime mid-june. Basically it's golf with orbital physics, and a very janky camera. For the second shot at it, I may have gotten a bit distracted with mesh generation again. I wanted a system I could use to quickly mockup a planet, so, I spent the better part of a week writing a system to help me quickly solve that problem. Basically, I wanted to generate planets with heightmaps through textures, and a few parameters, with accurate collision. \n\nBasically I'm taking parameters for latitude and longitude segments, minimum and maximum distance from the center, and a texture with heightmap data in the red channel; I'm then projecting a grid of points to a sphere, displaced by the offset in the red channel. Thought about using green and blue for north/south and east/west displacement, but that's not implemented.\n\n\n### Demo scene:\n[demo scene link](https://www.youtube.com/watch?v=PYdqGG5Um7o)\n\nIt's able to use the same generated mesh for collision, which is just lovely. Godot 4 is beautiful. I figured I'd have to write mesh decomposition again, but no! `ConcavePolygonShape3D` understands what you've been through. `ConcavePolygonShape3D` won't hurt you like other collision shapes have.\n\n---\n\nI *might* make the code available for just the script, but I'd like to put a but more polish on it first, it's not quiiiite where I'd like it to be. Maybe I make the in-game camera work, who knows.\n\n"
    },
    {
        "filename": "202508081846noise based texture reconstructer.md",
        "title": "Comically bad Compression but it's a Visual Effect now",
        "subtitle": "",
        "thumbnail": "https://i.imgur.com/vuaiFKd.jpeg \"reconstruction screenshot\"",
        "content": "# Comically bad Compression but it's a Visual Effect now\n\n![reconstruction screenshot](https://i.imgur.com/vuaiFKd.jpeg \"reconstruction screenshot\")\n\nBuilt this in Python back in 2024 on a whim, thinking sampling noise recursively might be able to make a decently close version of an image, and maaaaybe it'll be smaller in size. What I ended up with instead was an interesting painterly effect, that took a while to generate. \n\n[demo video](https://www.youtube.com/watch?v=Ae_Mxj4cF7Y) \n\nWorks by analyzing the image at multiple scales, producing grids of tiles, searching for noise seeds that best approximate the texture for each tile, for each color channel, then blending those grids together as the scales get finer.\n"
    },
    {
        "filename": "202508081635animalese voiceover and text renderer.md",
        "title": "Animalese Voiceover and Textbox Renderer",
        "subtitle": "",
        "thumbnail": "https://i.imgur.com/7NoflOZ.jpeg \"video screenshot\"",
        "content": "![video screenshot](https://i.imgur.com/7NoflOZ.jpeg \"video screenshot\")\n\n# Animalese Voiceover and Textbox Renderer\n\nBuilt this in godot back in 2024 when I needed some kind of visual for adding text in my compilations, for things like disclaimers, which I wanted on screen for a while. I wanted text that *felt* voiced, without interjecting myself into content focused on another channel. Something like to animalese felt right, so I threw this project together.\n\nIt types out text and tries to pronounce phonemes it can match, has support for a lot of arguments for how the text is displayed, enough to give the text some character, and flow somewhat like speech.\n\n[demo video](https://www.youtube.com/watch?v=Kw6i6e7WPUo)  \nthat video's script:\n```\nvar texts2 = [\n\t\"$$f3Realizing I never demoed this since changing a lot.$$y9$$f4 So here's that-$$y9$$a\",  # Frame rate and delay demonstration\n\t\"$$f2You can change the text speed,$$y3 or $$stoggle slow mode$$s,$$y3 which just advances every third character$$y9$$a\",  # Slow mode demonstration\n\t\"$$f4These$$y3 pauses$$y3 exist.$$y9$$a\",  # Wait command demonstration\n\t\"$$f3I like this keypress sound$$f6$$y3$$v$$v$$v$$f3$$y5\\n$$a\",\n\t\"$$nProbably too much$$f6$$y3$$v$$v$$v$$y9$$a\",  # Keypress sound demonstration\n\t\"$$f3You can delete charatcers:$$y5$$d$$y3$$d$$y2$$d$$d$$d$$d$$y2cters kinda like that$$v$$y9$$a\",  # Delete command demonstration\n\t\"$$f3manually clearing$$cthe textbox$$v$$y9$$a\",  # Clear command demonstration\n\t\"$$f3Advance text one line at a time:$$y9 \\nLine 1$$v$$y3\\n$$nLine 2$$v$$y3\\n$$nLine 3$$v$$y9$$a\",  # Advance one line demonstration\n\t\"$$f3Setting a new $$f1frame rate mid-line$$v$$y3$$f7\\nhowever many$$f2 times $$f1you want$$v$$y9$$a\",  # Frame rate change demonstration\n\t\"$$f3You can also just,$$y3 not auto-advance the text if you want$$v\",\n\t\"or even rudely interrupt me before $$f5I say fuck at you\",\n\t\"OH! This background is 6 shaders taped together$$v$$y5 The stream background is already 5 on its own, plus the light flicker$$v$$f9$$y9$$y9$$f3 \\n\\n$$n$$nyeah.\",\n\t\" \"  # Spacer\n]\n```\n\nCharacters appear sequentially with adjustable speed, and are read as they are typed. Formatting is somewhat easily embedded within, with commands.\n\n```\n# Command List:\n# $$y#: Waits for a specified number of characters (#) before continuing.\n# $$s: toggles Slow mode (printing every 3rd character)\n# $$a: Advance to the next textbox\n# $$n: deletes textbox up to the first Newline character (advance text 1 line)  eg: $$n\\n\n# $$c: Clears the textbox\n# $$d: Deletes the last char\n# $$v: plays a keypress sound and types a period. idk, d for dot was taken.\n# $$f#: set Frames per char. range 1-9, default 4\n```\n\nCurrently, it works. The code's messy in places, but it does what I needed it to. I might clean it up if I reuse this again, but I've changed format enough that I doubt that'll be any time soon.\n\nGotta say, I do enjoy how much use I've gotten out of those tiling shaders.\n\n(Not pictured in the video: my replaying the lines 85 times trying to get the flow right)\n"
    },
    {
        "filename": "202409130253yoinkyt progress.md",
        "title": "YoinkYT development progress",
        "subtitle": "Y'see it's called that because it's it's yoinking from youtube it's a kit for that it's a kit for yoinking it's the Yoink Kit for youtube it's-",
        "thumbnail": "https://i.imgur.com/1zZdmi4.png \"Randall-Munroe-esc thought provoking line\"",
        "content": "\n\n![yoinkyt gui](https://i.imgur.com/1zZdmi4.png \"Randall-Munroe-esc thought provoking line\")\n![discord screenshot of cinnamon's yoinkyt module](https://i.imgur.com/FDzsVyE.png \"??\") \n\n\n# YoinkYT development progress\n\n### Y'see it's called that because it's it's yoinking from youtube it's a kit for that it's a kit for yoinking it's the Yoink Kit for youtube it's-\n\n# todo: ask BLG if they're cool with this screenshot being used in this way before publishing\n\nI've been writing this collection of scripts to assist in clipping episodic videos for compilations. It's been a lovely project, where progress is quite visible, and sharing it is kind of the point. It's also a tool that could be used for content theft, and as such, I will not be releasing it or its source. I have explicit permission from the creator whose content I am using to test and improve these scripts ~~and the compilations themselves of course, I do also just enjoy making them.~~ That *does* give me opportunity to write about it here, though.\n\nHere is a video of YoinkYt running while I still had no UI- the project file was just handwritten json.\n[e](https://www.youtube.com/watch?v=zqJFYRKTWcI) \n\nIt's also slow as balls here.\n\nSince then, I have written the two UI's screenshotted above- for my workflow I prefer the discord bot module. It's right where I need it all the time, and I can just alt+tab, type a very concise command, and be on my way. It generates the project json that I can, through the clip editor GUI for now, directly turn into timestamped clips.\n\nShould I be using json? No. Am I still doing this despite knowing that from the start? Yes. It's not the important part, and ik how to work with it.\n\n### clipping process\n\nYou can totally skip this, it's just the workflow, specifically for the discord bot. For now, a clip / project file needs to be initialized manually: `!>setclipfile <file_name_or_alias> <playlist url>` will do that. A new discord channel is created for a given project. If a clip file is not set, on seeing a clip command, the bot will attempt to use the channel name as an alias, skipping some typing, or some command forgetting-. Alternatively, an existing channel may be used, via `!>setclipfile <file_name_or_alias>` if the file already exists, manually setting the clip file for this channel, for that session.\n\n`clip [index] <timestamp> <duration>` is the verbose format for a clip command. it can be used to specify the video being clipped initially. Index can be implied from the previously clipped video. `clip toggle` toggles clipping mode, which will assume, for that channel, that any message with a colon in its first word is a clip command, reducing typing to `<timestamp> <duration>` for every clip after the first for a given video. The first clip still requires the verbose command. \n\n![concise command in discord](https://i.imgur.com/buA9o2f.png)\n\nlook at it. it's so beautiful. That's a clip. That's going to become a 40 second video file with a timestamp. I typed 8 characters including the space. It still needs to be trimmed manually in a video editor, for comedic timing and audio reasons, but.. that's a decent chunk of the work done for me.\n\nThe gui works pretty much exactly as you'd expect from the screenshot. You can also press enter in a filled textbox to add a new empty timestamp.\n\nRunning it, you kind of just... do that. You throw the project file at YoinkYT, take a nap, and clips have come out."
    },
    {
        "filename": "202409111143serverless out of laziness.md",
        "title": "on the structure of this website thing",
        "subtitle": "So basically I don't want to bother with hosting a server...",
        "thumbnail": "https://i.imgur.com/OZCWTY4.jpeg \"software gore\"",
        "content": "![autism creature](https://i.imgur.com/OZCWTY4.jpeg \"software gore\")\n\n# on the structure of this website thing\n\n## So basically I don't want to bother with hosting a server...\n\nBut I *do* know what python is- so I've just gone and written a python script to embed my markdown posts as a .js file.\n\nThis is peak serverless web design. It's just text, and me, so I figure it's never going to get large enough to need to be done well. This works, at least for now. Is this a blog? I think this is a blog.\n\nCompiling a ??? blog???? every change is wild though"
    },
    {
        "filename": "202409111103hello world.md",
        "title": "hello world",
        "subtitle": "I think this is a website?",
        "thumbnail": "https://i.imgur.com/tYNZSj1.jpeg \"autism creature\"",
        "content": "![autism creature](https://i.imgur.com/tYNZSj1.jpeg \"autism creature\")\n\n# hello world\n\n## I think this is a website?\n\nI'm not entirely sure what to put here tbh\n\n\n\n### I have no idea what I'm doing\n\nI'm not like a frontend dev or anything, just bored and figured I might as well do something like this. Lorem ipsum dolor sit amet or whatever."
    }
]);